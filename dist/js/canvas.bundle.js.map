{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/canvas.js"],"names":["THRESHOLD","INIT_HEIGHT_RATE","POINT_INTERVAL","MAX_INTERVAL_COUNT","ACCELARATION_RATE","SPRING_CONSTANT","SPRING_FRICTION","WAVE_SPREAD","FRICTION_LOSS","WATER_FRICTION_LOSS","CRASH_LOSS","INIT_LETTER_VERTICAL_POSITION","WATER_DENSITY","GRAVITATIONAL_ACCELERATION","WATER_INIT_SPEED","UNDER_WATER_GRAVITY","GRAVITY","_window","_canvas","c","_width","_height","points","letters","pointInterval","previousAxis","letterList","letters_interval","_button","init","initDependencies","setup","bindEventListeners","animate","initLetters","createSurface","fillStyle","beginPath","moveTo","i","length","renderPoint","lineTo","closePath","fill","createSurfacePoints","window","document","querySelector","getContext","innerWidth","innerHeight","width","height","handleWindowResize","getAxis","event","x","clientX","y","clientY","handleMouseMove","axis","index","Math","round","getCurrentPoint","waterVelocity","letterVelocity","forEach","v","updateWithManual","velocityY","update","handleMouseEnter","handleReduceDensity","item","reduceDensity","addEventListener","pointsNum","push","Surface","point","previousPoint","setPreviousPoint","setNextPoint","requestAnimationFrame","clearRect","controlStatus","globalCompositeOperation","letter","count","updateSelf","updateNeighbors","pointX","initHeight","fy","force","previous","next","nextPoint","prototype","abs","Letter","text","interval","range","left","right","size","measureText","density","generateRandomDecimal","volume","volumeUnderwater","quality","gravityForce","buoyancy","velocity","generateRandom","createLetters","save","font","textAlign","textBaseline","fillText","restore","min","max","floor","random","underWaterHeight","console","log"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;AClFA,IAAOA,YAAmD,EAA1D;AACA,IAAOC,mBAAmD,GAA1D;AACA,IAAOC,iBAAmD,CAA1D,C,CAAkF;AAClF,IAAOC,qBAAmD,EAA1D;AACA,IAAOC,oBAAmD,IAA1D;AACA,IAAOC,kBAAmD,IAA1D;AACA,IAAOC,kBAAmD,GAA1D;AACA,IAAOC,cAAmD,GAA1D;AACA,IAAOC,gBAAmD,IAA1D;AACA,IAAOC,sBAAmD,IAA1D;AACA,IAAOC,aAAmD,GAA1D;AACA,IAAOC,gCAAmD,CAAC,GAA3D;AACA,IAAOC,gBAAmD,EAA1D,C,CAAkF;AAClF,IAAOC,6BAAmD,GAA1D,C,CAAkF;AAClF,IAAOC,mBAAmD,CAA1D,C,CAAkF;AAClF,IAAOC,sBAAmD,GAA1D;AACA,IAAOC,UAAmD,CAA1D;;AAEA,IACEC,gBADF;AAAA,IAEEC,gBAFF;AAAA,IAGEC,UAHF;AAAA,IAIEC,eAJF;AAAA,IAKEC,gBALF;AAAA,IAMEC,eANF;AAAA,IAOEC,UAAU,YAPZ;AAAA,IAQEC,sBARF;AAAA,IASEC,qBATF;AAAA,IAUEC,aAAa,EAVf;AAAA,IAWEC,mBAAmB,CAXrB;AAAA,IAYEC,gBAZF;;AAcA,SAASC,IAAT,GAAiB;AACfC;AACAC;AACAC;AACAC;AACAC;AACD;AACD,SAASC,aAAT,GAAyB;AACvBhB,IAAEiB,SAAF,GAAc,kBAAd;AACAjB,IAAEkB,SAAF;AACAlB,IAAEmB,MAAF,CAAS,CAAT,EAAYjB,OAAZ;;AAEA,OAAK,IAAIkB,IAAI,CAAb,EAAgBA,IAAIjB,OAAOkB,MAA3B,EAAmCD,GAAnC,EAAwC;AACtCjB,WAAOiB,CAAP,EAAUE,WAAV;AACD;AACDtB,IAAEuB,MAAF,CAAStB,MAAT,EAAiBC,OAAjB;AACAF,IAAEwB,SAAF;AACAxB,IAAEyB,IAAF;AACD;AACD,SAASb,KAAT,GAAkB;AAChBT,WAAS,EAAT;AACAI,eAAa,EAAb;AACAF,kBAAgBrB,kBAAhB;;AAEA0C;AACD;AACD,SAASf,gBAAT,GAA6B;AAC3Bb,YAAU6B,MAAV;AACA5B,YAAU6B,SAASC,aAAT,CAAuB,QAAvB,CAAV;AACApB,YAAUmB,SAASC,aAAT,CAAuB,QAAvB,CAAV;AACA7B,MAAID,QAAQ+B,UAAR,CAAmB,IAAnB,CAAJ;AACA7B,WAASH,QAAQiC,UAAjB;AACA7B,YAAUJ,QAAQkC,WAAlB;AACA7B,WAAS,EAAT;AACAK,qBAAmBP,SAASG,QAAQiB,MAApC;;AAEAtB,UAAQkC,KAAR,GAAgBhC,MAAhB;AACAF,UAAQmC,MAAR,GAAiBhC,OAAjB;AACD;AACD,SAASiC,kBAAT,GAA+B;AAC7BpC,UAAQkC,KAAR,GAAgBnC,QAAQiC,UAAxB;AACAhC,UAAQmC,MAAR,GAAiBpC,QAAQkC,WAAzB;;AAEAtB;AACD;;AAED,SAAS0B,OAAT,CAAiBC,KAAjB,EAAwB;AACtB,SAAO;AACLC,OAAGD,MAAME,OADJ;AAELC,OAAGH,MAAMI;AAFJ,GAAP;AAID;AACD,SAASC,eAAT,CAA0BL,KAA1B,EAAiC;;AAE/B,MAAIM,OAAOP,QAAQC,KAAR,CAAX;AACA,MAAI,CAAC/B,YAAL,EAAmB;AACjBA,mBAAeqC,IAAf;AACD;AACD,MAAMC,QAAQC,KAAKC,KAAL,CAAWH,KAAKL,CAAL,GAAS9B,gBAApB,CAAd;AACAuC,kBAAgBJ,KAAKL,CAArB,EAAwBK,KAAKH,CAA7B,EAAgCG,KAAKH,CAAL,GAASlC,aAAakC,CAAtD;;AAEA,MAAMQ,gBAAgBL,KAAKL,CAAL,GAAShC,aAAagC,CAA5C;AACA,MAAMW,iBAAiB,CAACN,KAAKH,CAAL,GAASlC,aAAakC,CAAvB,IAA4BpD,WAAnD;AACAmB,aAAW2C,OAAX,CAAmB,UAACC,CAAD,EAAI/B,CAAJ,EAAU;AAC3BA,UAAMwB,KAAN,IACGD,KAAKH,CAAL,GAAStC,UAAU,CAAV,GAAcrB,SAD1B,IAEG8D,KAAKH,CAAL,GAAStC,UAAU,CAAV,GAAcrB,SAF1B,IAGGsE,EAAEC,gBAAF,CAAmBJ,aAAnB,EAAkCC,cAAlC,CAHH;AAID,GALD;;AAOA3C,iBAAeqC,IAAf;AACD;AACD,SAASI,eAAT,CAAyBT,CAAzB,EAA4BE,CAA5B,EAA+Ba,SAA/B,EAA0C;AACxC,MAAGb,IAAItC,UAAU,CAAV,GAAcrB,SAAlB,IAA+B2D,IAAItC,UAAU,CAAV,GAAcrB,SAApD,EAA8D;AAC5D;AACD;AACD,MAAM+D,QAAQC,KAAKC,KAAL,CAAWR,IAAIjC,aAAf,CAAd;;AAEAF,SAAOyC,KAAP,EAAcU,MAAd,CAAqBd,CAArB,EAAwBa,SAAxB;AACD;AACD,SAASE,gBAAT,CAA2BlB,KAA3B,EAAkC;AAChC/B,iBAAe8B,QAAQC,KAAR,CAAf;AACD;AACD,SAASmB,mBAAT,GAAgC;AAC9BjD,aAAW2C,OAAX,CAAmB,gBAAQ;AACzBO,SAAKC,aAAL;AACD,GAFD;AAGD;AACD,SAAS7C,kBAAT,GAA+B;AAC7Bf,UAAQ6D,gBAAR,CAAyB,QAAzB,EAAmCxB,kBAAnC;AACArC,UAAQ6D,gBAAR,CAAyB,YAAzB,EAAuCJ,gBAAvC;AACAzD,UAAQ6D,gBAAR,CAAyB,WAAzB,EAAsCjB,eAAtC;AACAjC,UAAQkD,gBAAR,CAAyB,OAAzB,EAAkCH,mBAAlC;AACD;AACD,SAAS9B,mBAAT,GAAgC;AAC9B,MAAMkC,YAAYf,KAAKC,KAAL,CAAW7C,SAASlB,cAApB,CAAlB;AACA;AACAsB,kBAAgBJ,UAAW2D,YAAY,CAAvB,CAAhB;AACAzD,SAAO0D,IAAP,CAAY,IAAIC,OAAJ,CAAY,CAAZ,CAAZ;;AAEA,OAAK,IAAI1C,IAAI,CAAb,EAAgBA,IAAIwC,SAApB,EAA+BxC,GAA/B,EAAoC;AAClC;AACA,QAAM2C,QAAQ,IAAID,OAAJ,CAAY1C,IAAIf,aAAhB,CAAd;AACA;AACA,QAAM2D,gBAAgB7D,OAAOiB,IAAI,CAAX,CAAtB;;AAEA2C,UAAME,gBAAN,CAAuBD,aAAvB;AACAA,kBAAcE,YAAd,CAA2BH,KAA3B;;AAEA5D,WAAO0D,IAAP,CAAYE,KAAZ;AACD;AACF;AACD,SAASjD,OAAT,GAAoB;AAClBqD,wBAAsBrD,OAAtB;AACAd,IAAEoE,SAAF,CAAY,CAAZ,EAAe,CAAf,EAAkBnE,MAAlB,EAA0BC,OAA1B;;AAEAmE;AACArD;;AAEAhB,IAAEsE,wBAAF,GAA6B,KAA7B;;AAEA,MAAI/D,WAAWc,MAAf,EAAuB;AACrBd,eAAW2C,OAAX,CAAmB,kBAAU;AAC3BqB,aAAOjB,MAAP,CAAe,KAAf;AACD,KAFD;AAGD;AACF;AACD,SAASe,aAAT,GAA0B;AACxB,OAAI,IAAIjD,IAAI,CAAR,EAAWoD,QAAQrE,OAAOkB,MAA9B,EAAsCD,IAAIoD,KAA1C,EAAiDpD,GAAjD,EAAqD;AACnDjB,WAAOiB,CAAP,EAAUqD,UAAV;AACD;AACD,OAAI,IAAIrD,KAAI,CAAR,EAAWoD,SAAQrE,OAAOkB,MAA9B,EAAsCD,KAAIoD,MAA1C,EAAiDpD,IAAjD,EAAqD;AACnDjB,WAAOiB,EAAP,EAAUsD,eAAV;AACD;AACF;AACD,IAAIZ,UAAU,SAAVA,OAAU,CAAUa,MAAV,EAAkB;AAC9B,OAAKrC,CAAL,GAASqC,MAAT;AACA,OAAKC,UAAL,GAAkB1E,UAAU,CAA5B;AACA,OAAKgC,MAAL,GAAc,KAAK0C,UAAnB;AACA,OAAKC,EAAL,GAAU,CAAV;AACA,OAAKC,KAAL,GAAa,EAACC,UAAW,CAAZ,EAAeC,MAAO,CAAtB,EAAb;AACA,OAAKhB,aAAL,GAAqB,IAArB;AACA,OAAKiB,SAAL,GAAiB,IAAjB;AACD,CARD;;AAUAnB,QAAQoB,SAAR,GAAoB;AAClBjB,kBADkB,4BACAD,aADA,EACe;AAC/B,SAAKA,aAAL,GAAqBA,aAArB;AACD,GAHiB;AAIlBE,cAJkB,wBAIJe,SAJI,EAIO;AACvB,SAAKA,SAAL,GAAiBA,SAAjB;AACD,GANiB;AAOlB3D,aAPkB,yBAOH;AACb,QAAG,KAAK0C,aAAR,EAAsB;AACpB,WAAKA,aAAL,CAAmB9B,MAAnB,IAA6B,KAAK4C,KAAL,CAAWC,QAAxC;AACA,WAAKf,aAAL,CAAmBa,EAAnB,IAAyB,KAAKC,KAAL,CAAWC,QAApC;AACD;AACD,QAAG,KAAKE,SAAR,EAAkB;AAChB,WAAKA,SAAL,CAAe/C,MAAf,IAAyB,KAAK4C,KAAL,CAAWE,IAApC;AACA,WAAKC,SAAL,CAAeJ,EAAf,IAAqB,KAAKC,KAAL,CAAWE,IAAhC;AACD;AACDhF,MAAEuB,MAAF,CAAS,KAAKe,CAAd,EAAiBpC,UAAU,KAAKgC,MAAhC;AACD,GAjBiB;AAkBlBoB,QAlBkB,kBAkBVd,CAlBU,EAkBPa,SAlBO,EAkBI;AACpB,SAAKwB,EAAL,GAAU3E,UAAUjB,iBAAV,IAAgCiB,UAAU,KAAKgC,MAAf,GAAwBM,CAAzB,IAA+B,CAA/B,GAAmC,CAAC,CAApC,GAAwC,CAAvE,IAA4EK,KAAKsC,GAAL,CAAS9B,SAAT,CAAtF;AACD,GApBiB;AAqBlBoB,YArBkB,wBAqBJ;AACZ,SAAKI,EAAL,IAAW3F,mBAAmB,KAAK0F,UAAL,GAAkB,KAAK1C,MAA1C,CAAX,CADY,CACkD;AAC9D,SAAK2C,EAAL,GAAU,KAAKA,EAAL,GAAU1F,eAApB,CAFY,CAEyB;AACrC,SAAK+C,MAAL,IAAe,KAAK2C,EAApB;AACD,GAzBiB;AA0BlBH,iBA1BkB,6BA0BC;AACjB,QAAG,KAAKV,aAAR,EAAsB;AACpB,WAAKc,KAAL,CAAWC,QAAX,GAAsB3F,eAAe,KAAK8C,MAAL,GAAc,KAAK8B,aAAL,CAAmB9B,MAAhD,CAAtB;AACD;AACD,QAAG,KAAK+C,SAAR,EAAkB;AAChB,WAAKH,KAAL,CAAWE,IAAX,GAAkB5F,eAAe,KAAK8C,MAAL,GAAc,KAAK+C,SAAL,CAAe/C,MAA5C,CAAlB;AACD;AACF;AAjCiB,CAApB;;AAqCA,SAASnB,WAAT,GAAwB;AACtB,OAAK,IAAIK,IAAI,CAAb,EAAgBA,IAAIhB,QAAQiB,MAA5B,EAAoCD,GAApC,EAAyC;AACvCb,eAAWsD,IAAX,CAAgB,IAAIuB,MAAJ,CAAWhE,CAAX,EAAchB,QAAQgB,CAAR,CAAd,CAAhB;AACD;AACF;AACD,IAAIgE,SAAS,SAATA,MAAS,CAAUxC,KAAV,EAAiByC,IAAjB,EAAuB;AAClC,OAAKzC,KAAL,GAAaA,KAAb;AACA,OAAKyC,IAAL,GAAYA,IAAZ;AACA,OAAKC,QAAL,GAAgBrF,SAASG,QAAQiB,MAAjC;AACA,OAAKkE,KAAL,GAAa;AACXC,UAAM,KAAK5C,KAAL,GAAa,KAAK0C,QADb;AAEXG,WAAO,CAAC,KAAK7C,KAAL,GAAa,CAAd,IAAmB,KAAK0C;AAFpB,GAAb;AAIA,OAAK9C,CAAL,GAAShD,6BAAT;AACA,OAAK8C,CAAL,GAAS,KAAKM,KAAL,GAAa,KAAK0C,QAAlB,GAA6B,KAAKA,QAAL,GAAgB,CAAtD;AACA,OAAKI,IAAL,GAAY;AACVzD,WAAOjC,EAAE2F,WAAF,CAAc,KAAKN,IAAnB,EAAyBpD,KADtB;AAEVC,YAAQlC,EAAE2F,WAAF,CAAc,KAAKN,IAAnB,EAAyBpD;AAFvB,GAAZ;AAIA,OAAK2D,OAAL,GAAe,KAAKC,qBAAL,CAA2BpG,gBAAgB,CAA3C,EAA8CA,gBAAgB,CAA9D,CAAf;AACA,OAAKqG,MAAL,GAAc,KAAKJ,IAAL,CAAUzD,KAAV,GAAkB,KAAKyD,IAAL,CAAUxD,MAA1C;AACA,OAAK6D,gBAAL,GAAwB,CAAxB;AACA,OAAKC,OAAL,GAAe,KAAKJ,OAAL,GAAe,KAAKE,MAAnC;AACA,OAAKG,YAAL,GAAoB,KAAKD,OAAL,GAAetG,0BAAnC;AACA,OAAKwG,QAAL,GAAgB,CAAhB;AACA,OAAKC,QAAL,GAAgB;AACd7D,OAAG,KAAK8D,cAAL,CAAoB,CAAC,CAArB,EAAwB,CAAxB,CADW;AAEd5D,OAAG,KAAK4D,cAAL,CAAoB,CAApB,EAAuB,CAAvB,IAA4B,KAAKR;AAFtB,GAAhB;AAID,CAxBD;AAyBAR,OAAOF,SAAP,GAAmB;AACjBmB,eADiB,2BACA;AACfrG,MAAEsG,IAAF;AACAtG,MAAEkB,SAAF;AACAlB,MAAEuG,IAAF,GAAS,gBAAT;AACAvG,MAAEwG,SAAF,GAAc,QAAd;AACAxG,MAAEyG,YAAF,GAAiB,QAAjB;AACAzG,MAAEiB,SAAF,GAAc,kBAAd;AACAjB,MAAE0G,QAAF,CAAW,KAAKrB,IAAhB,EAAsB,KAAK/C,CAA3B,EAA8B,KAAKE,CAAnC;AACAxC,MAAEwB,SAAF;AACAxB,MAAE2G,OAAF;AACD,GAXgB;AAYjBP,gBAZiB,0BAYDQ,GAZC,EAYIC,GAZJ,EAYS;AACxB,WAAOD,MAAM/D,KAAKiE,KAAL,CAAWjE,KAAKkE,MAAL,KAAgBF,GAA3B,CAAb;AACD,GAdgB;AAejBhB,uBAfiB,iCAeMe,GAfN,EAeWC,GAfX,EAegB;AAC/B,WAAOD,MAAM/D,KAAKkE,MAAL,MAAiBF,MAAMD,GAAN,GAAY,CAA7B,CAAb;AACD,GAjBgB;AAkBjBtD,QAlBiB,oBAkBP;AACR,SAAK+C,aAAL;AACA,SAAK7D,CAAL,IAAU,KAAK2D,QAAL,CAAc3D,CAAxB;AACA,SAAKF,CAAL,IAAU,KAAK6D,QAAL,CAAc7D,CAAxB;;AAEA,QAAI,KAAKE,CAAL,GAAStC,UAAU,CAAvB,EAA0B;AACxB;AACA,WAAK6F,gBAAL,GAAwB,KAAKD,MAA7B;AACA,WAAKI,QAAL,GAAgBzG,gBAAgB,KAAKsG,gBAArB,GAAwCrG,0BAAxD;AACD,KAJD,MAIO,IACL,KAAK8C,CAAL,GAAS,KAAKkD,IAAL,CAAUxD,MAAV,GAAmB,CAA5B,GAAgChC,UAAU,CAA1C,IACG,KAAKsC,CAAL,GAAS,KAAKkD,IAAL,CAAUxD,MAAV,GAAmB,CAA5B,GAAgChC,UAAU,CAFxC,EAE2C;AAChD;AACA,UAAM8G,mBAAmB,KAAKxE,CAAL,GAAS,KAAKkD,IAAL,CAAUxD,MAAnB,GAA4BhC,UAAU,CAA/D;AACA,WAAK6F,gBAAL,GAAwB,KAAKL,IAAL,CAAUzD,KAAV,GAAkB+E,gBAA1C;AACA,WAAKd,QAAL,GAAgBzG,gBAAgB,KAAKsG,gBAArB,GAAwCrG,0BAAxD;AACD,KAPM,MAOA;AACL;AACA,WAAKwG,QAAL,GAAgB,CAAhB;AACA,WAAKH,gBAAL,GAAwB,CAAxB;AACD;;AAED,QAAI,KAAKG,QAAT,EAAmB;AACjB;AACAnD,sBAAgB,KAAKT,CAArB,EAAwB,KAAKE,CAA7B,EAAgC,KAAK2D,QAAL,CAAc3D,CAAd,GAAkB,KAAK2D,QAAL,CAAc7D,CAAd,GAAkBlD,WAApE;AACA,WAAK+G,QAAL,CAAc7D,CAAd,IAAmBhD,mBAAnB;AACA,UAAI,KAAKsG,OAAL,GAAenG,aAAnB,EAAkC;AAChC;AACA,aAAK0G,QAAL,CAAc3D,CAAd,GAAkB,EAAE/C,gBAAgB,KAAKmG,OAAvB,IAAkClG,0BAApD;AACA,YAAI,KAAK8C,CAAL,GAAS,KAAKkD,IAAL,CAAUxD,MAAnB,GAA4BhC,UAAU,CAA1C,EAA6C;AAC3C,eAAKiG,QAAL,CAAc3D,CAAd,GAAkB,CAAlB;AACA,eAAK2D,QAAL,CAAc7D,CAAd,GAAkB,CAAlB;AACD;AACF,OAPD,MAOO,IAAI,KAAKsD,OAAL,GAAenG,aAAnB,EAAkC;AACvC;AACA,aAAK0G,QAAL,CAAc3D,CAAd,GAAkB7C,gBAAlB;AACA,aAAKwG,QAAL,CAAc3D,CAAd,IAAmB5C,mBAAnB;AACA,YAAI,KAAK4C,CAAL,GAAS,KAAK2D,QAAL,CAAc3D,CAAvB,GAA2B,KAAKkD,IAAL,CAAUxD,MAArC,GAA8ChC,OAAlD,EAA2D;AACzD;AACA,eAAKsC,CAAL,GAAStC,UAAU,KAAKwF,IAAL,CAAUxD,MAA7B;AACA,eAAKiE,QAAL,CAAc7D,CAAd,IAAmBjD,aAAnB;AACD;AACF,OATM,MASA;AACL;AACA,aAAK8G,QAAL,CAAc3D,CAAd,GAAkB,CAAlB;AACD;AACF,KAxBD,MAwBO;AACL;AACA,WAAK2D,QAAL,CAAc3D,CAAd,IAAmB3C,OAAnB;AACD;;AAED,QACE,KAAKyC,CAAL,GAAS,KAAK6D,QAAL,CAAc7D,CAAvB,GAA2B,KAAKoD,IAAL,CAAUzD,KAArC,GAA6C,KAAKsD,KAAL,CAAWE,KAAxD,IACG,KAAKnD,CAAL,GAAS,KAAKoD,IAAL,CAAUzD,KAAnB,GAA2B,KAAKkE,QAAL,CAAc7D,CAAzC,GAA6C,KAAKiD,KAAL,CAAWC,IAF7D,EAGE;AACA,WAAKW,QAAL,CAAc3D,CAAd,IAAmBjD,UAAnB;AACA,WAAK4G,QAAL,CAAc7D,CAAd,GAAkB,CAAC,KAAK6D,QAAL,CAAc7D,CAAf,GAAmBjD,aAArC;AACD;AACF,GA5EgB;AA6EjB+D,kBA7EiB,4BA6ECJ,aA7ED,EA6EgBC,cA7EhB,EA6EgC;AAC/C,SAAKkD,QAAL,CAAc7D,CAAd,GAAkBU,gBAAgB5D,WAAlC;AACA,QAAI6D,iBAAiB,CAArB,EAAwB;AACtB,WAAKkD,QAAL,CAAc3D,CAAd,GAAkBS,iBAAiBvD,0BAAnC;AACD,KAFD,MAEO;AACL,WAAKyG,QAAL,CAAc3D,CAAd,GAAkBS,iBAAkB,KAAK2C,OAAvB,GAAkClG,0BAApD;AACD;AACDuH,YAAQC,GAAR,CAAY,KAAKf,QAAjB;AACD,GArFgB;AAsFjBzC,eAtFiB,2BAsFA;AACf,SAAKkC,OAAL,IAAgB,GAAhB;AACD;AAxFgB,CAAnB;;AA4FAlF,O","file":"./js/canvas.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/canvas.js\");\n","const  THRESHOLD                                =         50;\r\nconst  INIT_HEIGHT_RATE                         =         0.5;\r\nconst  POINT_INTERVAL                           =         5;                      /* 组成水面的点之间的距离 */\r\nconst  MAX_INTERVAL_COUNT                       =         50;\r\nconst  ACCELARATION_RATE                        =         0.01;\r\nconst  SPRING_CONSTANT                          =         0.03;\r\nconst  SPRING_FRICTION                          =         0.9;\r\nconst  WAVE_SPREAD                              =         0.3;\r\nconst  FRICTION_LOSS                            =         0.75;\r\nconst  WATER_FRICTION_LOSS                      =         0.99;\r\nconst  CRASH_LOSS                               =         0.9;\r\nconst  INIT_LETTER_VERTICAL_POSITION            =         -100;\r\nconst  WATER_DENSITY                            =         10;                     /* 水的密度 */\r\nconst  GRAVITATIONAL_ACCELERATION               =         9.8;                    /* 重力加速度 */\r\nconst  WATER_INIT_SPEED                         =         1;                      /* 落入水面后的初始速度 */\r\nconst  UNDER_WATER_GRAVITY                      =         0.4;\r\nconst  GRAVITY                                  =         1;\r\n\r\nlet\r\n  _window,\r\n  _canvas,\r\n  c,\r\n  _width,\r\n  _height,\r\n  points,\r\n  letters = \"HEELOWORLD\",\r\n  pointInterval,\r\n  previousAxis,\r\n  letterList = [],\r\n  letters_interval = 0,\r\n  _button;\r\n\r\nfunction init () {\r\n  initDependencies();\r\n  setup();\r\n  bindEventListeners();\r\n  animate();\r\n  initLetters();\r\n}\r\nfunction createSurface() {\r\n  c.fillStyle = 'rgba(0, 0, 0, 1)';\r\n  c.beginPath();\r\n  c.moveTo(0, _height);\r\n  \r\n  for (let i = 0; i < points.length; i++) {\r\n    points[i].renderPoint();\r\n  }\r\n  c.lineTo(_width, _height);\r\n  c.closePath();\r\n  c.fill();\r\n}\r\nfunction setup () {\r\n  points = [];\r\n  letterList = [];\r\n  pointInterval = MAX_INTERVAL_COUNT;\r\n  \r\n  createSurfacePoints();\r\n}\r\nfunction initDependencies () {\r\n  _window = window;\r\n  _canvas = document.querySelector(\"canvas\");\r\n  _button = document.querySelector(\"button\");\r\n  c = _canvas.getContext(\"2d\");\r\n  _width = _window.innerWidth;\r\n  _height = _window.innerHeight;\r\n  points = [];\r\n  letters_interval = _width / letters.length;\r\n  \r\n  _canvas.width = _width;\r\n  _canvas.height = _height;\r\n}\r\nfunction handleWindowResize () {\r\n  _canvas.width = _window.innerWidth;\r\n  _canvas.height = _window.innerHeight;\r\n  \r\n  init();\r\n}\r\n\r\nfunction getAxis(event) {\r\n  return {\r\n    x: event.clientX,\r\n    y: event.clientY\r\n  }\r\n}\r\nfunction handleMouseMove (event) {\r\n  \r\n  let axis = getAxis(event);\r\n  if (!previousAxis) {\r\n    previousAxis = axis\r\n  }\r\n  const index = Math.round(axis.x / letters_interval);\r\n  getCurrentPoint(axis.x, axis.y, axis.y - previousAxis.y);\r\n  \r\n  const waterVelocity = axis.x - previousAxis.x;\r\n  const letterVelocity = (axis.y - previousAxis.y) * WAVE_SPREAD;\r\n  letterList.forEach((v, i) => {\r\n    i === index\r\n    && axis.y > _height / 2 - THRESHOLD\r\n    && axis.y < _height / 2 + THRESHOLD\r\n    && v.updateWithManual(waterVelocity, letterVelocity);\r\n  });\r\n  \r\n  previousAxis = axis;\r\n}\r\nfunction getCurrentPoint(x, y, velocityY) {\r\n  if(y < _height / 2 - THRESHOLD || y > _height / 2 + THRESHOLD){\r\n    return;\r\n  }\r\n  const index = Math.round(x / pointInterval);\r\n  \r\n  points[index].update(y, velocityY)\r\n}\r\nfunction handleMouseEnter (event) {\r\n  previousAxis = getAxis(event);\r\n}\r\nfunction handleReduceDensity () {\r\n  letterList.forEach(item => {\r\n    item.reduceDensity();\r\n  })\r\n}\r\nfunction bindEventListeners () {\r\n  _window.addEventListener(\"resize\", handleWindowResize);\r\n  _window.addEventListener(\"mouseenter\", handleMouseEnter);\r\n  _window.addEventListener(\"mousemove\", handleMouseMove);\r\n  _button.addEventListener(\"click\", handleReduceDensity)\r\n}\r\nfunction createSurfacePoints () {\r\n  const pointsNum = Math.round(_width / POINT_INTERVAL);\r\n  /* 点与点之间的实际的距离（要除以点的数量 - 1 才可以） */\r\n  pointInterval = _width / ( pointsNum - 1 );\r\n  points.push(new Surface(0));\r\n  \r\n  for (let i = 1; i < pointsNum; i++) {\r\n    /* i * pointInterval 是每一个点的横坐标 */\r\n    const point = new Surface(i * pointInterval);\r\n    /* 记录当前点前面的一个点 */\r\n    const previousPoint = points[i - 1];\r\n    \r\n    point.setPreviousPoint(previousPoint);\r\n    previousPoint.setNextPoint(point);\r\n    \r\n    points.push(point);\r\n  }\r\n}\r\nfunction animate () {\r\n  requestAnimationFrame(animate);\r\n  c.clearRect(0, 0, _width, _height);\r\n  \r\n  controlStatus ();\r\n  createSurface();\r\n  \r\n  c.globalCompositeOperation = 'xor';\r\n  \r\n  if (letterList.length) {\r\n    letterList.forEach(letter => {\r\n      letter.update( false );\r\n    })\r\n  }\r\n}\r\nfunction controlStatus () {\r\n  for(let i = 0, count = points.length; i < count; i++){\r\n    points[i].updateSelf();\r\n  }\r\n  for(let i = 0, count = points.length; i < count; i++){\r\n    points[i].updateNeighbors();\r\n  }\r\n}\r\nlet Surface = function (pointX) {\r\n  this.x = pointX;\r\n  this.initHeight = _height / 2;\r\n  this.height = this.initHeight;\r\n  this.fy = 0;\r\n  this.force = {previous : 0, next : 0};\r\n  this.previousPoint = null;\r\n  this.nextPoint = null;\r\n};\r\n\r\nSurface.prototype = {\r\n  setPreviousPoint (previousPoint) {\r\n    this.previousPoint = previousPoint\r\n  },\r\n  setNextPoint (nextPoint) {\r\n    this.nextPoint = nextPoint\r\n  },\r\n  renderPoint () {\r\n    if(this.previousPoint){\r\n      this.previousPoint.height += this.force.previous;\r\n      this.previousPoint.fy += this.force.previous;\r\n    }\r\n    if(this.nextPoint){\r\n      this.nextPoint.height += this.force.next;\r\n      this.nextPoint.fy += this.force.next;\r\n    }\r\n    c.lineTo(this.x, _height - this.height)\r\n  },\r\n  update (y, velocityY) {\r\n    this.fy = _height * ACCELARATION_RATE * ((_height - this.height - y) >= 0 ? -1 : 1) * Math.abs(velocityY);\r\n  },\r\n  updateSelf () {\r\n    this.fy += SPRING_CONSTANT * (this.initHeight - this.height); /* 弹簧弹出的长度  */\r\n    this.fy = this.fy * SPRING_FRICTION; /* 受摩擦力的影响，每次弹出的距离在减小 */\r\n    this.height += this.fy;\r\n  },\r\n  updateNeighbors () {\r\n    if(this.previousPoint){\r\n      this.force.previous = WAVE_SPREAD * (this.height - this.previousPoint.height);\r\n    }\r\n    if(this.nextPoint){\r\n      this.force.next = WAVE_SPREAD * (this.height - this.nextPoint.height);\r\n    }\r\n  }\r\n};\r\n\r\n\r\nfunction initLetters () {\r\n  for (let i = 0; i < letters.length; i++) {\r\n    letterList.push(new Letter(i, letters[i]))\r\n  }\r\n}\r\nlet Letter = function (index, text) {\r\n  this.index = index;\r\n  this.text = text;\r\n  this.interval = _width / letters.length;\r\n  this.range = {\r\n    left: this.index * this.interval,\r\n    right: (this.index + 1) * this.interval\r\n  };\r\n  this.y = INIT_LETTER_VERTICAL_POSITION;\r\n  this.x = this.index * this.interval + this.interval / 2;\r\n  this.size = {\r\n    width: c.measureText(this.text).width,\r\n    height: c.measureText(this.text).width\r\n  };\r\n  this.density = this.generateRandomDecimal(WATER_DENSITY - 1, WATER_DENSITY + 1);\r\n  this.volume = this.size.width * this.size.height;\r\n  this.volumeUnderwater = 0;\r\n  this.quality = this.density * this.volume;\r\n  this.gravityForce = this.quality * GRAVITATIONAL_ACCELERATION;\r\n  this.buoyancy = 0;\r\n  this.velocity = {\r\n    x: this.generateRandom(-3, 3),\r\n    y: this.generateRandom(1, 8) * this.density\r\n  };\r\n};\r\nLetter.prototype = {\r\n  createLetters () {\r\n    c.save();\r\n    c.beginPath();\r\n    c.font = \"bold 60px 微软雅黑\";\r\n    c.textAlign = \"center\";\r\n    c.textBaseline = \"middle\";\r\n    c.fillStyle = 'rgba(0 ,0 ,0 ,1)';\r\n    c.fillText(this.text, this.x, this.y);\r\n    c.closePath();\r\n    c.restore()\r\n  },\r\n  generateRandom (min, max) {\r\n    return min + Math.floor(Math.random() * max)\r\n  },\r\n  generateRandomDecimal (min, max) {\r\n    return min + Math.random() * (max - min + 1)\r\n  },\r\n  update () {\r\n    this.createLetters();\r\n    this.y += this.velocity.y;\r\n    this.x += this.velocity.x;\r\n    \r\n    if (this.y > _height / 2) {\r\n      /* 到了水面以下， 浸没 */\r\n      this.volumeUnderwater = this.volume;\r\n      this.buoyancy = WATER_DENSITY * this.volumeUnderwater * GRAVITATIONAL_ACCELERATION;\r\n    } else if (\r\n      this.y + this.size.height / 2 < _height / 2\r\n      && this.y - this.size.height / 2 > _height / 2) {\r\n      /* 浸入水面但还没有浸没 */\r\n      const underWaterHeight = this.y + this.size.height - _height / 2;\r\n      this.volumeUnderwater = this.size.width * underWaterHeight;\r\n      this.buoyancy = WATER_DENSITY * this.volumeUnderwater * GRAVITATIONAL_ACCELERATION;\r\n    } else {\r\n      /* 在水面上 */\r\n      this.buoyancy = 0;\r\n      this.volumeUnderwater = 0;\r\n    }\r\n  \r\n    if (this.buoyancy) {\r\n      /* 和水面接触以后 */\r\n      getCurrentPoint(this.x, this.y, this.velocity.y + this.velocity.x * WAVE_SPREAD);\r\n      this.velocity.x *= WATER_FRICTION_LOSS;\r\n      if (this.density < WATER_DENSITY) {\r\n        /* 物体密度小于水的密度, 上浮 */\r\n        this.velocity.y = -(WATER_DENSITY - this.density) * GRAVITATIONAL_ACCELERATION;\r\n        if (this.y - this.size.height < _height / 2) {\r\n          this.velocity.y = 0;\r\n          this.velocity.x = 0;\r\n        }\r\n      } else if (this.density > WATER_DENSITY) {\r\n        /* 物体密度大于水的密度，下沉 */\r\n        this.velocity.y = WATER_INIT_SPEED;\r\n        this.velocity.y += UNDER_WATER_GRAVITY;\r\n        if (this.y + this.velocity.y + this.size.height > _height) {\r\n          /* 沉底 */\r\n          this.y = _height - this.size.height;\r\n          this.velocity.x *= FRICTION_LOSS;\r\n        }\r\n      } else {\r\n        /* 悬浮或者漂浮 */\r\n        this.velocity.y = 0;\r\n      }\r\n    } else {\r\n      /* 在空中 */\r\n      this.velocity.y += GRAVITY;\r\n    }\r\n    \r\n    if (\r\n      this.x + this.velocity.x + this.size.width > this.range.right\r\n      || this.x - this.size.width + this.velocity.x < this.range.left\r\n    ) {\r\n      this.velocity.y *= CRASH_LOSS;\r\n      this.velocity.x = -this.velocity.x * FRICTION_LOSS;\r\n    }\r\n  },\r\n  updateWithManual (waterVelocity, letterVelocity) {\r\n    this.velocity.x = waterVelocity * WAVE_SPREAD;\r\n    if (letterVelocity < 0) {\r\n      this.velocity.y = letterVelocity / GRAVITATIONAL_ACCELERATION\r\n    } else {\r\n      this.velocity.y = letterVelocity * (this.density) / GRAVITATIONAL_ACCELERATION\r\n    }\r\n    console.log(this.velocity);\r\n  },\r\n  reduceDensity () {\r\n    this.density -= 0.5;\r\n  }\r\n};\r\n\r\n\r\ninit();"],"sourceRoot":""}